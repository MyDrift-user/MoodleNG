.quiz-taking-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: #f5f5f5;
  
  .loading-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    gap: 16px;
    
    p {
      margin: 0;
      font-size: 16px;
      color: #666;
    }
  }
  
  .error-container {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 20px;
    
    .error-card {
      max-width: 500px;
      width: 100%;
      
      .error-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 16px;
        
        mat-icon {
          font-size: 48px;
          width: 48px;
          height: 48px;
        }
        
        h3 {
          margin: 0;
          color: #333;
        }
        
        p {
          margin: 0;
          color: #666;
        }
      }
    }
  }
  
  .quiz-interface {
    display: flex;
    flex-direction: column;
    height: 100%;
    
    .quiz-header {
      background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
      color: white;
      padding: 8px 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      min-height: 64px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      
      .quiz-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
        font-size: 18px;
        
        mat-icon {
          font-size: 24px;
        }
      }
      
      .timer-container {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.1);
        min-width: 120px;
        
        &.timer-normal {
          background: rgba(76, 175, 80, 0.2);
        }
        
        &.timer-warning {
          background: rgba(255, 152, 0, 0.2);
          color: #ff9800;
        }
        
        &.timer-critical {
          background: rgba(244, 67, 54, 0.2);
          color: #f44336;
          animation: pulse 1s infinite;
        }
        
        .timer-text {
          font-weight: 600;
          font-family: 'Roboto Mono', monospace;
        }
        
        .timer-progress {
          width: 100px;
          height: 4px;
          border-radius: 2px;
        }
      }
      
      .autosave-status {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        margin-left: auto;
        
        .saving-icon {
          animation: spin 1s linear infinite;
        }
        
        .save-time {
          opacity: 0.8;
        }
      }
      
      .header-actions {
        display: flex;
        gap: 8px;
      }
    }
    
    .quiz-content {
      flex: 1;
      display: grid;
      grid-template-columns: 1fr 300px;
      gap: 20px;
      padding: 20px;
      overflow: hidden;
      
      @media (max-width: 1200px) {
        grid-template-columns: 1fr;
        grid-template-rows: 1fr auto;
      }
      
      .page-navigation {
        grid-column: 1 / -1;
        margin-bottom: 16px;
        
        .page-chips {
          display: flex;
          justify-content: center;
          
          mat-chip-listbox {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
          }
          
                     mat-chip-option {
             cursor: pointer;
             
             &[disabled] {
               opacity: 0.5;
               cursor: not-allowed;
             }
           }
        }
      }
      
      .quiz-form {
        overflow-y: auto;
        padding-right: 8px;
        
        .questions-container {
          display: flex;
          flex-direction: column;
          gap: 24px;
          
          .question-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: box-shadow 0.3s ease;
            
            &:hover {
              box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            }
            
            .question-header {
              display: flex;
              align-items: center;
              gap: 12px;
              
              .question-number {
                font-weight: 600;
                color: #1976d2;
              }
              
              .question-points {
                color: #666;
                font-size: 14px;
              }
              
              .question-flag {
                margin-left: auto;
              }
            }
            
            .question-text {
              margin-bottom: 20px;
              line-height: 1.6;
              color: #333;
              
              p {
                margin: 0 0 12px 0;
              }
              
              img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
                margin: 12px 0;
              }
            }
            
            .question-answers {
              .answer-container {
                margin-bottom: 20px;
                
                &:last-child {
                  margin-bottom: 0;
                }
                
                .full-width {
                  width: 100%;
                }
                
                .answer-label {
                  display: block;
                  font-weight: 500;
                  color: #333;
                  margin-bottom: 12px;
                }
                
                .radio-group {
                  .radio-options {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                  }
                }
                
                .checkbox-group {
                  .checkbox-options {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                  }
                }
              }
            }
            
            .raw-question-content {
              // Styles for complex Moodle question types that use raw HTML
              line-height: 1.6;
              
              // Style common Moodle form elements
              input[type="text"], 
              input[type="number"],
              textarea,
              select {
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 4px;
                font-family: inherit;
                font-size: 14px;
                
                &:focus {
                  outline: none;
                  border-color: #1976d2;
                  box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.2);
                }
              }
              
              // Style drag and drop areas
              .ddarea {
                border: 2px dashed #ddd;
                border-radius: 8px;
                padding: 16px;
                text-align: center;
                background: #fafafa;
                transition: all 0.3s ease;
                
                &.ui-droppable-hover {
                  border-color: #1976d2;
                  background: #e3f2fd;
                }
              }
              
              // Style draggable items
              .draggable {
                background: white;
                border: 1px solid #ddd;
                border-radius: 4px;
                padding: 8px 12px;
                cursor: move;
                display: inline-block;
                margin: 4px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                
                &:hover {
                  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
                }
              }
            }
          }
        }
        
        .navigation-controls {
          margin-top: 32px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 16px 0;
          border-top: 1px solid #eee;
          
          .nav-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
            
            .page-indicator {
              font-weight: 500;
              color: #666;
            }
          }
          
          .submit-controls {
            button {
              min-width: 140px;
              height: 48px;
              font-weight: 600;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }
          }
        }
      }
      
      .quiz-info-panel {
        @media (max-width: 1200px) {
          grid-row: 2;
        }
        
        .info-card {
          background: white;
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          height: fit-content;
          
          .info-items {
            display: flex;
            flex-direction: column;
            gap: 16px;
            
            .info-item {
              display: flex;
              align-items: center;
              gap: 12px;
              
              mat-icon {
                color: #1976d2;
                font-size: 20px;
                width: 20px;
                height: 20px;
              }
              
              span {
                font-size: 14px;
                color: #333;
              }
            }
          }
        }
      }
    }
  }
}

// Animations
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// Custom scrollbar for question container
.quiz-form {
  &::-webkit-scrollbar {
    width: 8px;
  }
  
  &::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
    
    &:hover {
      background: #a8a8a8;
    }
  }
}

// Warning snackbar styles
::ng-deep .warning-snackbar {
  background-color: #ff9800 !important;
  color: white !important;
  
  .mat-mdc-snack-bar-action {
    color: white !important;
  }
}

// Error snackbar styles
::ng-deep .error-snackbar {
  background-color: #f44336 !important;
  color: white !important;
  
  .mat-mdc-snack-bar-action {
    color: white !important;
  }
}

// Mobile responsive adjustments
@media (max-width: 768px) {
  .quiz-taking-container {
    .quiz-interface {
      .quiz-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        padding: 12px 16px;
        
        .timer-container {
          width: 100%;
          justify-content: center;
        }
        
        .autosave-status {
          margin-left: 0;
        }
      }
      
      .quiz-content {
        padding: 16px;
        gap: 16px;
        
        .navigation-controls {
          flex-direction: column;
          gap: 16px;
          
          .nav-buttons {
            width: 100%;
            justify-content: space-between;
          }
          
          .submit-controls {
            width: 100%;
            
            button {
              width: 100%;
            }
          }
        }
      }
    }
  }
} 